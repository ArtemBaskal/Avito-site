(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{43:function(e,t,a){e.exports=a(80)},52:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(18),l=a.n(c),o=a(2),i=a(10),u=a(41),s=a(11),p=(0,a(6).createBrowserHistory)(),m=a(16),d=(a(52),function(){return n.a.createElement("ul",{className:"favorites-link"},n.a.createElement(m.a,{to:"/favorites"},n.a.createElement("svg",{width:"21",height:"24",xmlns:"http://www.w3.org/2000/svg"},n.a.createElement("path",{d:"M10.918 5.085a5.256 5.256 0 0 1 7.524 0c2.077 2.114 2.077 5.541 0 7.655l-7.405 7.534a.75.75 0 0 1-1.074 0L2.558 12.74c-2.077-2.114-2.077-5.54 0-7.655a5.256 5.256 0 0 1 7.524 0c.15.152.289.312.418.479.13-.167.269-.327.418-.479z",fill:"#CCC",fillRule:"nonzero"}))))}),f=a(4),v=a(13),g=a.n(v),E=a(25),h=a(14),b=a.n(h),y="https://avito.dump.academy",O=function(e){return function(){var t=Object(E.a)(g.a.mark(function t(a){var r;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get("".concat(y,"/products"));case 2:return t.t0=function(t){return t.category===e},t.t1=t.sent.data.data.filter(t.t0),t.next=6,b.a.get("".concat(y,"/sellers"));case 6:return t.t2=t.sent.data.data,r={products:t.t1,sellers:t.t2},t.abrupt("return",a({type:"FILTER_BY_CATEGORY",payload:r}));case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},S=(a(72),[{ru:"\u041d\u0435\u0434\u0432\u0438\u0436\u0438\u043c\u043e\u0441\u0442\u044c",en:"immovable"},{ru:"\u0410\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0438",en:"auto"},{ru:"\u0424\u043e\u0442\u043e\u0430\u043f\u043f\u0430\u0440\u0430\u0442\u044b",en:"cameras"},{ru:"\u041d\u043e\u0443\u0442\u0431\u0443\u043a\u0438",en:"laptops"}]),j=function(){var e=Object(o.c)();return n.a.createElement("div",null,n.a.createElement("select",{name:"type",onChange:function(t){e(O(t.target.value))},defaultValue:"\u041b\u044e\u0431\u0430\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",className:"category-filter-select"},n.a.createElement("option",{value:"\u041b\u044e\u0431\u0430\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",disabled:!0},"\u041b\u044e\u0431\u0430\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"),S&&S.map(function(e){var t=e.en,a=e.ru;return n.a.createElement("option",{key:t,value:t,className:"category-filter-option"},a.toUpperCase())})))},N=a(12),w=a(20),C=a(21),x=a(23),P=a(22),_=a(24),R=(a(73),{minPrice:{id:"minPrice",placeholder:"\u0426\u0435\u043d\u0430 \u043e\u0442",text:"\u043e\u0442",style:"left"},maxPrice:{id:"maxPrice",placeholder:"\u0434\u043e, \u0440\u0443\u0431",text:"\u0434\u043e",style:"right"}}),B={maxPrice:{value:"",isBlured:!0},minPrice:{value:"",isBlured:!0}},T=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(x.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(n)))).state=B,a.onFormSubmit=function(e){e.preventDefault(),a.setState(B),a.props.filterByPrice(a.state)},a.onInputChange=function(e){var t=e.target,r=t.id,n=t.value;a.setState(Object(N.a)({},r,Object(f.a)({},a.state[r],{value:n})))},a.onInputBlur=function(e){var t=e.target.id,r=a.state,n=r.minPrice,c=r.maxPrice;if(c.value&&Number(n.value.replace(/\D/g,""))>Number(c.value.replace(/\D/g,""))){var l=Object(f.a)({},a.state.minPrice);a.setState(function(e){return{minPrice:Object(f.a)({},e.maxPrice,{isBlured:!0}),maxPrice:Object(f.a)({},l,{isBlured:!0})}})}else a.setState(function(e){return Object(N.a)({},t,Object(f.a)({},e[t],{isBlured:!e[t].isBlured}))})},a.formatPrice=function(e,t){var a,r="",n=0,c=0,l=Number(e.replace(/\D/g,""));return a=e&&l.toLocaleString(),l>=99500&&(n=3,r="\u0442\u044b\u0441."),l>=999500&&(n=6,c=2,r="\u043c\u043b\u043d."),l>=999999500&&(n=9,r="\u043c\u043b\u0440\u0434."),t?"".concat((l/Math.pow(10,n)).toFixed(c).replace(".",",")," ").concat(r):a},a.getValue=function(e){var t=a.state[e],r=t.isBlured,n=t.value,c=R[e].text;return n&&"".concat(r?c:""," ").concat(a.formatPrice(n,r))},a}return Object(_.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this,t=this.props.products.products;return n.a.createElement("div",null,n.a.createElement("form",{onSubmit:this.onFormSubmit,className:"price-filter-form"},n.a.createElement("label",{className:"price-filter-label"},"\u0426\u0435\u043d\u0430"),n.a.createElement("div",null,R&&Object.values(R).map(function(t){var a=t.id,r=t.placeholder,c=t.style;return n.a.createElement("input",{key:a,id:a,type:"text",maxLength:17,value:e.getValue(a),placeholder:r,onChange:e.onInputChange,onBlur:e.onInputBlur,onFocus:e.onInputBlur,className:"price-filter-input ".concat(c),autoComplete:"off"})}),n.a.createElement("button",{type:"submit",className:"price-filter-btn"},t?"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c ".concat(t.length," \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0439"):"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u044f"))))}}]),t}(n.a.Component),k=Object(o.b)(function(e){return{products:e.products}},{filterByPrice:function(e){return function(){var t=Object(E.a)(g.a.mark(function t(a){var r;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get("".concat(y,"/products"));case 2:return t.t0=t.sent.data.data,t.next=5,b.a.get("".concat(y,"/sellers"));case 5:return t.t1=t.sent.data.data,r={products:t.t0,sellers:t.t1},t.abrupt("return",a({type:"FILTER_BY_PRICE",payload:Object(f.a)({},e,r)}));case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}})(T),A=(a(74),{default:{order:"ASC",param:"id",en:"default",ru:"\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e"},popular:{order:"DESC",param:"rating",en:"popular",ru:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u0435\u0435"},cheap:{order:"ASC",param:"price",en:"cheap",ru:"\u0414\u0435\u0448\u0435\u0432\u043b\u0435"},expensive:{order:"DESC",param:"price",en:"expensive",ru:"\u0414\u043e\u0440\u043e\u0436\u0435"}}),F=function(){var e=Object(o.c)();return n.a.createElement("div",null,n.a.createElement("label",{className:"sorting-label"},"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),n.a.createElement("select",{name:"type",defaultValue:"\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e",onChange:function(t){var a=A[t.target.value];e(function(e){return{type:"SORT_BY_PARAM",payload:e}}(a))},className:"sorting-select"},A&&Object.values(A).map(function(e){var t=e.en,a=e.ru;return n.a.createElement("option",{key:t,value:t},a)})))},I=(a(75),function(){var e=Object(o.c)(),t=function(t){e(O(t.target.id))};return n.a.createElement("nav",null,n.a.createElement("ul",null,n.a.createElement(m.a,{to:"/"},n.a.createElement("img",{src:"https://www.avito.st/s/cc/resources/35f5a0d67b53.svg",alt:"avito",style:{width:"120px"},className:"nav-avito-logo"})),S&&S.map(function(e){var a=e.en,r=e.ru;return n.a.createElement("li",{key:a,id:a,className:"nav-category-li",onClick:t},r)})))}),D=function(){return n.a.createElement("div",null,n.a.createElement(d,null),n.a.createElement(I,null),n.a.createElement(j,null),n.a.createElement(k,null),n.a.createElement(F,null))},M=(a(76),function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(x.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(n)))).params=Object(f.a)({},a.props,{timestamp:Date.now()}),a.onHeartClick=function(){var e=a.props,t=e.changeFavoriteStatus,r=e.isFavorite,n=e.isSmall;r&&!n&&window.location.reload(),t(a.params)},a.classNamy=function(e,t,a){return a?"small ".concat(localStorage[e]?"selected":""):t&&!a?"fav-js-favorites-add-icon":a?void 0:"js-favorites-add-icon ".concat(localStorage[e]?"selected":"")},a}return Object(_.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.title,r=e.pictures,c=e.price,l=e.sellerName,o=e.sellerRating,i=e.isFavorite,u=e.isSmall;return n.a.createElement("div",{className:"product"},n.a.createElement("header",{title:"\u041e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435 ".concat(a),className:"product-header"},n.a.createElement("i",{className:this.classNamy(t,i,u),onClick:this.onHeartClick,title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435 \u0438 \u0432 \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435"}),n.a.createElement("img",{src:r[0],alt:a,className:i?"fav-product-image":"product-image"}),n.a.createElement("div",{className:"img-number"},r.length)),n.a.createElement("div",null,n.a.createElement("span",{className:"title",title:a},a),n.a.createElement("span",{className:"price"},c?"".concat(c.toLocaleString()," \u20bd"):"\u0426\u0435\u043d\u0430 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430"),!u&&n.a.createElement("div",null,n.a.createElement("div",null,l),n.a.createElement("div",null,o))))}}]),t}(n.a.Component)),L=Object(o.b)(function(e){return{favorites:e.favorites}},{changeFavoriteStatus:function(e){return{type:"CHANGE_FAVORITE_STATUS",payload:e}}})(M),Y=function(e){var t,a=e.isSmall;try{t=Object.values(localStorage).map(function(e){return JSON.parse(e)}).sort(function(e,t){return e.timestamp-t.timestamp})}catch(r){alert("\u041e\u0448\u0438\u0431\u043a\u0430! \u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430 (\u043d\u0435\u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439 \u0442\u0438\u043f) \u0432 localStorage. \u041e\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u043e\u0447\u0438\u0449\u0435\u043d\u043e."),console.log(r),localStorage.clear(),t=[]}return n.a.createElement("div",null,!!t.length&&n.a.createElement("h3",{className:"favorites-title"},"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"),t.map(function(e){var t=e.id,r=e.title,c=e.pictures,l=e.price,o=e.sellerName,i=e.sellerRating;return n.a.createElement(L,{id:t,key:t,title:r,price:l,pictures:c,sellerName:o,sellerRating:i,isFavorite:!0,isSmall:a})}))},H=(a(77),function(){return n.a.createElement("div",{className:"favorites-page"},n.a.createElement(D,null),n.a.createElement(Y,null))}),V=(a(78),function(e){var t=Object(o.d)(function(e){return e.products}),a=Object(o.c)();return Object(r.useEffect)(function(){a(function(){var e=Object(E.a)(g.a.mark(function e(t){var a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("".concat(y,"/products"));case 2:return e.t0=e.sent.data.data,e.next=5,b.a.get("".concat(y,"/sellers"));case 5:return e.t1=e.sent.data.data,a={products:e.t0,sellers:e.t1},e.abrupt("return",t({type:"FETCH_PRODUCTS",payload:a}));case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},{}),n.a.createElement("div",{className:"products-list"},t.products&&t.products.map(function(e){var a=e.id,r=e.title,c=e.pictures,l=e.price,o=e.relationships.seller;return n.a.createElement(L,{key:a,id:a,title:r,price:l,pictures:c,sellerName:t.sellers[o].name,sellerRating:t.sellers[o].rating})}))}),U=(a(79),function(){return n.a.createElement("div",{className:"main-page"},n.a.createElement(D,null),n.a.createElement(V,null),n.a.createElement(Y,{isSmall:!0}))}),G=function(){return n.a.createElement(s.b,{history:p},n.a.createElement(s.c,null,n.a.createElement(s.a,{path:"/",exact:!0,component:U}),n.a.createElement(s.a,{path:"/favorites",exact:!0,component:H})))};function J(e,t){return Math.floor(Math.abs(e)/Math.pow(10,t))%10}function z(e,t,a){for(var r=function(e){for(var t,a=0,r=0;r<e.length;r++)a=Math.max(a,0===(t=e[r])?1:Math.floor(Math.log10(Math.abs(t)))+1);return a}(e.map(function(e){return e[t]||0})),n=function(r){for(var n=Array.from({length:10},function(){return[]}),c=0;c<e.length;c++){var l=J(e[c][t]||0,r);n[l].push(e[c])}!function(){e=[];var t=function(t,a){return e=t.concat(a)};"ASC"===a?n.reduce(t):n.reduceRight(t)}()},c=0;c<r;c++)n(c);return e}var X=Object(i.c)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PRODUCTS":case"FILTER_BY_CATEGORY":return t.payload;case"FILTER_BY_PRICE":var a=t.payload,r=a.minPrice,n=a.maxPrice,c=a.products,l=a.sellers;return r=Number(r.value.replace(/\D/g,"")||-1/0),n=Number(n.value.replace(/\D/g,"")||1/0),{products:c.filter(function(e){var t=e.price;return(t||0)>r&&(t||0)<n}),sellers:l};case"SORT_BY_PARAM":var o=e.products,i=e.sellers,u=t.payload,s=u.param;return{products:("rating"===s?function(e){return e.sort(function(e,t){return i[t.relationships.seller].rating-i[e.relationships.seller].rating})}:z)(o,s,u.order),sellers:i};default:return e}},favorites:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_FAVORITE_STATUS":var a=t.payload.id;try{if(localStorage[a])return delete localStorage[a],delete e[a],Object(f.a)({},e);localStorage[a]=JSON.stringify(t.payload)}catch(r){console.error(r),alert("\u041e\u0448\u0438\u0431\u043a\u0430! \u0412 localStorage \u043f\u0440\u0435\u0432\u044b\u0448\u0435\u043d \u043b\u0438\u043c\u0438\u0442, \u043e\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u043e\u0447\u0438\u0449\u0435\u043d\u043e."),localStorage.clear()}return Object(f.a)({},e,Object(N.a)({},a,t.payload));default:return e}}}),q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,K=Object(i.e)(X,q(Object(i.a)(u.a)));l.a.render(n.a.createElement(o.a,{store:K},n.a.createElement(G,null)),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.530a6005.chunk.js.map